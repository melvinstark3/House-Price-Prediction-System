# -*- coding: utf-8 -*-
"""Day20_15Jul.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1Tuku6qcFK0W1cDe5fACBYL8XZkAN_yQS
"""
import pandas as pd

df = pd.read_csv('Housing_Modified_prepared.csv')
df.head()

# Removing Multi-Collinearity Using Variance Inflation Factor

Y = df['price']
iv = df.columns
iv = iv.delete(0)
X = df[iv]

# Fit the Ordinary Least Squared Regression Model

import statsmodels.api as sm
model = sm.OLS(Y, X)

# Train the Model

model = model.fit()

# Check the Model
model.summary()

# Calculating Variance Inflation Factor

from statsmodels.stats.outliers_influence \
                import variance_inflation_factor as vif

# 1 is the index of Lotsize

VIF_Lotsize = vif(df[iv].values,0)   # Convert DF into Array
#print('VIF of Lotsze:',VIF_Lotsize)

for i in range(len(iv)):
    VIFs = [vif(df[iv].values,index) for index in range(len(iv))]
    mvif = max(VIFs)
    if mvif > 10:
        #print('Max VIF value is',mvif)
        drop_index = VIFs.index(mvif)
        #print('DELETING',iv[drop_index])
        iv = iv.delete(drop_index)

#print(iv)

X = df[iv]
Y = df['price']

model = sm.OLS(Y, X)

model = model.fit()

model.summary()

import sys
index = 1

user_input = {}
for var in iv:
    # temp = input('Enter '+var+' :')
	
    temp = sys.argv[index]
    index = index+1
    user_input[var] = temp
user_df = pd.DataFrame(data = user_input,index=[0],columns = iv)
#price = model.predict(user_df.values)
#print("Price of House is USD",int(price[0]))
#print(price)

import sklearn.linear_model as lm
lr = lm.LinearRegression()
lr.fit(X, Y)

price = lr.predict(user_df)
print("Price of House is USD",round(price[0],2))
